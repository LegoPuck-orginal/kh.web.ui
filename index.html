<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>WebDesktop OS</title>
    <style>
        :root {
            --primary-color: #0084ff;
            --accent-color: #00c2ff;
            --window-bg: rgba(255, 255, 255, 0.95);
            --shadow-color: rgba(0, 0, 0, 0.15);
            --border-radius: 16px;
            --font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, Oxygen, Ubuntu, sans-serif;
        }

        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            background: url('background.png') center/cover;
            font-family: var(--font-family);
            transition: all 0.3s ease;
        }

        body.dark-mode {
            --primary-color: #00a8ff;
            --accent-color: #39c0ff;
            --window-bg: rgba(28, 28, 30, 0.95);
            --shadow-color: rgba(0, 0, 0, 0.25);
            background-color: #121212;
            color: #ffffff;
        }

        body.dark-mode .window {
            background: rgba(28, 28, 30, 0.92);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .window-header {
            background: rgba(45, 45, 48, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode #dock {
            background: rgba(45, 45, 48, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode #top-bar {
            background: rgba(28, 28, 30, 0.8);
            color: white;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode #editor-toolbar button,
        body.dark-mode #editor-toolbar select,
        body.dark-mode #editor-toolbar input {
            background: #333;
            color: #fff;
            border: 1px solid #555;
        }

        /* Login Page */
        #login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            color: white;
        }

        .login-form {
            background: rgba(255, 255, 255, 0.15);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            min-width: 320px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .login-form input {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
        }

        .login-form button {
            padding: 12px;
            border-radius: 8px;
            border: none;
            background: var(--primary-color);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .login-form button:hover {
            background: var(--accent-color);
            transform: translateY(-2px);
        }

        /* Top Bar */
        #top-bar {
            height: 40px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            display: flex;
            justify-content: space-between;
            padding: 0 24px;
            align-items: center;
            font-size: 14px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Dock */
        #dock {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.8);
            padding: 12px 18px;
            border-radius: 24px;
            backdrop-filter: blur(12px);
            display: flex;
            gap: 16px;
            box-shadow: 0 6px 20px var(--shadow-color);
            border: 1px solid rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
        }

        .app-icon {
            width: 56px;
            height: 56px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 14px;
            padding: 6px;
        }

        .app-icon:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 5px 15px var(--shadow-color);
            background: rgba(255, 255, 255, 0.3);
        }

        /* Fenster */
        .window {
            position: absolute;
            min-width: 300px;
            min-height: 200px;
            width: 500px;
            height: 400px;
            border-radius: var(--border-radius);
            background: var(--window-bg);
            box-shadow: 0 12px 40px var(--shadow-color);
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease, opacity 0.2s ease;
            transform: scale(0.98);
            opacity: 0.95;
        }

        .window:hover {
            transform: scale(1);
            opacity: 1;
        }

        .window.maximized {
            border-radius: 0;
        }

        .window-header {
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(8px);
        }

        .window-controls {
            display: flex;
            gap: 5px;
        }

        .window-minimize,
        .window-maximize {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            color: rgba(0, 0, 0, 0.5);
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .window-minimize {
            background: #ffbd2e;
        }

        .window-maximize {
            background: #28c940;
        }

        .window-close {
            background: #ff5f57;
        }

        .window-minimize:hover {
            background: #f0ad1d;
        }

        .window-maximize:hover {
            background: #1db934;
        }

        .window-close:hover {
            background: #ff3b30;
        }

        .window-content {
            height: calc(100% - 52px);
            overflow: auto;
        }

        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 16px;
            height: 16px;
            cursor: nwse-resize;
            background: linear-gradient(135deg, transparent 50%, var(--primary-color) 50%);
            border-radius: 0 0 var(--border-radius) 0;
        }

        /* Taschenrechner */
        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            width: 280px;
        }

        .calculator-grid button {
            padding: 14px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            background: #f1f1f1;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calculator-grid button:hover {
            background: var(--primary-color);
            color: white;
        }

        #calc-display {
            width: 100%;
            padding: 14px;
            margin-bottom: 10px;
            font-size: 18px;
            text-align: right;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        /* Spiele */
        .game-canvas {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow-color);
        }

        /* Editor Toolbar */
        #editor-toolbar {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 10px;
            flex-wrap: wrap;
        }

        #editor-toolbar button, 
        #editor-toolbar select, 
        #editor-toolbar input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            font-size: 14px;
        }

        #editor-toolbar button:hover, 
        #editor-toolbar select:hover, 
        #editor-toolbar input:hover {
            background: #f5f5f5;
            border-color: #bbb;
        }

        #editor {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 16px;
            height: 320px;
            overflow-y: auto;
            background: white;
            color: #333;
            font-size: 16px;
            line-height: 1.5;
        }

        body.dark-mode #editor {
            background: #2c2c2e;
            color: #fff;
            border-color: #444;
        }

        /* Erweiterte Einstellungen */
        .settings-panel {
            display: flex;
            height: 450px;
            overflow: hidden;
        }
        
        .settings-sidebar {
            width: 180px;
            background: rgba(0, 0, 0, 0.05);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
            padding: 15px 0;
        }
        
        body.dark-mode .settings-sidebar {
            background: rgba(255, 255, 255, 0.05);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .settings-nav-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .settings-nav-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .settings-nav-item.active {
            background: var(--primary-color);
            color: white;
        }
        
        .settings-content {
            flex: 1;
            padding: 0 20px;
            overflow-y: auto;
        }
        
        .settings-section {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        .settings-section.active {
            display: block;
        }
        
        .setting-group {
            margin-bottom: 15px;
        }
        
        .setting-group label {
            display: block;
            margin-bottom: 5px;
        }
        
        .setting-group select,
        .setting-group input[type="text"],
        .setting-group input[type="color"],
        .setting-group input[type="range"] {
            width: 100%;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }
        
        body.dark-mode .setting-group select,
        body.dark-mode .setting-group input[type="text"],
        body.dark-mode .setting-group input[type="color"],
        body.dark-mode .setting-group input[type="range"] {
            background: #333;
            color: #fff;
            border-color: #555;
        }
        
        .setting-group button {
            padding: 8px 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .setting-group button:hover {
            background: var(--accent-color);
        }
        
        .danger-button {
            background: #ff3b30 !important;
        }
        
        .danger-button:hover {
            background: #d92e28 !important;
        }
        
        .setting-input-group {
            display: flex;
        }
        
        .setting-input-group input {
            flex: 1;
            border-radius: 6px 0 0 6px !important;
        }
        
        .setting-input-group button {
            border-radius: 0 6px 6px 0;
        }
        
        /* Switch Toggle */
        .setting-switch {
            position: relative;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .setting-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .switch-slider {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
            background-color: #ccc;
            border-radius: 20px;
            margin-right: 10px;
            transition: .4s;
        }
        
        .switch-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            border-radius: 50%;
            transition: .4s;
        }
        
        .setting-switch input:checked + .switch-slider {
            background-color: var(--primary-color);
        }
        
        .setting-switch input:checked + .switch-slider:before {
            transform: translateX(20px);
        }

        /* Zus√§tzliche Stile f√ºr Desktop-Icons und Login-Stil */
        .desktop-icons-container {
            position: fixed;
            top: 50px;
            left: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, 80px);
            gap: 20px;
            z-index: 1;
        }

        .desktop-icon {
            width: 80px;
            text-align: center;
            cursor: pointer;
        }

        .desktop-icon img {
            width: 48px;
            height: 48px;
            margin-bottom: 5px;
        }

        .desktop-icon span {
            display: block;
            color: white;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.8);
            font-size: 12px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Login Styles */
        .login-style-glass {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .login-style-solid {
            background: #333;
            border: none;
        }

        .login-style-minimal {
            background: transparent;
            box-shadow: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Dock Auto-Hide */
        .dock-autohide {
            transform: translateY(100px);
            opacity: 0.2;
            transition: transform 0.4s ease, opacity 0.3s ease;
        }

        .dock-autohide:hover {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        body.no-animations * {
            transition: none !important;
            animation: none !important;
        }
    </style>
</head>
<body>
<!-- Login Screen -->
<div id="login-container">
    <h1>WebOS Login</h1>
    <form class="login-form" onsubmit="return handleAuth(event)">
        <input type="text" id="username" placeholder="Benutzername" required>
        <input type="password" id="password" placeholder="Passwort" required>
        <button type="submit" id="submit-btn">Anmelden</button>
        <button type="button" onclick="toggleRegister()" id="toggle-btn">Registrieren</button>
    </form>
</div>

<!-- Desktop -->
<div id="desktop" style="display: none;">
    <div id="top-bar">
        <div id="system-time"></div>
        <div>
            <span>üîã 100%</span>
        </div>
    </div>

    <div id="dock">
        <img src="settings.png" class="app-icon" onclick="openApp('settings')">
        <img src="calc.png" class="app-icon" onclick="openApp('calculator')">
        <img src="pong.png" class="app-icon" onclick="openApp('pong')">
        <img src="texteditor.png" class="app-icon" onclick="openApp('textEditor')">
    </div>
</div>

<script>
    // Login System
    let isRegistering = false;
    function toggleRegister() {
        isRegistering = !isRegistering;
        document.getElementById('submit-btn').textContent = isRegistering ? 'Registrieren' : 'Anmelden';
        document.getElementById('toggle-btn').textContent = isRegistering ? 'Zur√ºck zum Login' : 'Registrieren';
    }

    function handleAuth(e) {
        e.preventDefault();
        const users = JSON.parse(localStorage.getItem('users') || '{}');
        const username = document.getElementById('username').value.trim();
        const password = document.getElementById('password').value;

        if (!username || !password) {
            alert('Bitte Benutzernamen und Passwort eingeben!');
            return;
        }

        if (isRegistering) {
            if (users[username]) return alert('Benutzer existiert bereits!');
            users[username] = password;
            localStorage.setItem('users', JSON.stringify(users));
            alert('Registrierung erfolgreich!');
            toggleRegister();
        } else {
            if (users[username] === password) {
                document.getElementById('login-container').style.display = 'none';
                document.getElementById('desktop').style.display = 'block';
            } else {
                alert('Falsche Anmeldedaten!');
            }
        }
    }

    // Desktop System
    let zIndex = 1;
    const apps = {
        settings: {
            title: 'Einstellungen',
            html: `
                <div class="settings-panel">
                    <div class="settings-sidebar">
                        <div class="settings-nav-item active" data-target="appearance">Aussehen</div>
                        <div class="settings-nav-item" data-target="desktop">Desktop</div>
                        <div class="settings-nav-item" data-target="loginscreen">Login-Screen</div>
                        <div class="settings-nav-item" data-target="system">System</div>
                        <div class="settings-nav-item" data-target="about">Info</div>
                    </div>
                    
                    <div class="settings-content">
                        <!-- Aussehen -->
                        <div class="settings-section active" id="appearance">
                            <h3>Design</h3>
                            <div class="setting-group">
                                <label class="setting-switch">
                                    <input type="checkbox" id="dark-mode-switch" onchange="toggleDarkMode(this.checked)">
                                    <span class="switch-slider"></span>
                                    <span>Dark Mode</span>
                                </label>
                            </div>
                            
                            <h3>Hintergrund</h3>
                            <div class="wallpaper-grid">
                                <div class="wallpaper-item" onclick="changeWallpaper('background.png')">
                                    <img src="background.png" alt="Standard">
                                </div>
                                <div class="wallpaper-item" onclick="changeWallpaper('url(\'https://source.unsplash.com/1920x1080/?nature\')')">
                                    <img src="https://source.unsplash.com/300x200/?nature" alt="Natur">
                                </div>
                                <div class="wallpaper-item" onclick="changeWallpaper('url(\'https://source.unsplash.com/1920x1080/?abstract\')')">
                                    <img src="https://source.unsplash.com/300x200/?abstract" alt="Abstrakt">
                                </div>
                                <div class="wallpaper-item" onclick="changeWallpaper('url(\'https://source.unsplash.com/1920x1080/?city\')')">
                                    <img src="https://source.unsplash.com/300x200/?city" alt="Stadt">
                                </div>
                                <div class="wallpaper-item" onclick="changeWallpaper('url(\'https://source.unsplash.com/1920x1080/?space\')')">
                                    <img src="https://source.unsplash.com/300x200/?space" alt="Weltraum">
                                </div>
                                <div class="wallpaper-item" onclick="changeWallpaper('url(\'https://source.unsplash.com/1920x1080/?minimal\')')">
                                    <img src="https://source.unsplash.com/300x200/?minimal" alt="Minimal">
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <label>Eigenes Hintergrundbild URL:</label>
                                <div class="setting-input-group">
                                    <input type="text" id="custom-wallpaper" placeholder="https://example.com/image.jpg">
                                    <button onclick="changeWallpaper('url(\'' + document.getElementById('custom-wallpaper').value + '\')')">Anwenden</button>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <label>Eigene Hintergrundfarbe:</label>
                                <input type="color" onchange="changeWallpaper(this.value)" value="#666666">
                            </div>
                            
                            <div class="setting-group">
                                <label>Hintergrund-Deckkraft:</label>
                                <input type="range" min="0" max="100" value="100" onchange="setBackgroundOpacity(this.value)">
                            </div>
                            
                            <h3>Farben</h3>
                            <div class="setting-group">
                                <label>Prim√§rfarbe:</label>
                                <input type="color" id="primary-color-picker" value="#0066ff" onchange="changePrimaryColor(this.value)">
                            </div>
                            <div class="setting-group">
                                <label>Akzentfarbe:</label>
                                <input type="color" id="accent-color-picker" value="#00c2ff" onchange="changeAccentColor(this.value)">
                            </div>
                            
                            <h3>Text</h3>
                            <div class="setting-group">
                                <label>Schriftgr√∂√üe:</label>
                                <select id="font-size-selector" onchange="changeFontSize(this.value)">
                                    <option value="14px">Klein</option>
                                    <option value="16px" selected>Standard</option>
                                    <option value="18px">Gro√ü</option>
                                    <option value="20px">Sehr gro√ü</option>
                                </select>
                            </div>
                            <div class="setting-group">
                                <label>Schriftart:</label>
                                <select id="font-family-selector" onchange="changeFontFamily(this.value)">
                                    <option value="'Segoe UI', sans-serif" selected>Segoe UI</option>
                                    <option value="'Arial', sans-serif">Arial</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'SF Pro Display', sans-serif">SF Pro</option>
                                    <option value="'Montserrat', sans-serif">Montserrat</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Desktop -->
                        <div class="settings-section" id="desktop">
                            <h3>Dock-Einstellungen</h3>
                            <div class="setting-group">
                                <label>Dock-Position:</label>
                                <select onchange="changeDockPosition(this.value)">
                                    <option value="bottom" selected>Unten</option>
                                    <option value="left">Links</option>
                                    <option value="right">Rechts</option>
                                </select>
                            </div>
                            <div class="setting-group">
                                <label>Dock-Gr√∂√üe:</label>
                                <input type="range" min="40" max="80" value="56" onchange="changeDockSize(this.value)">
                            </div>
                            <div class="setting-group">
                                <label class="setting-switch">
                                    <input type="checkbox" onchange="toggleDockAutoHide(this.checked)">
                                    <span class="switch-slider"></span>
                                    <span>Dock automatisch ausblenden</span>
                                </label>
                            </div>
                            
                            <h3>Desktop-Icons</h3>
                            <div class="setting-group">
                                <label class="setting-switch">
                                    <input type="checkbox" onchange="toggleDesktopIcons(this.checked)">
                                    <span class="switch-slider"></span>
                                    <span>Desktop-Icons anzeigen</span>
                                </label>
                            </div>
                            
                            <h3>Effekte & Animation</h3>
                            <div class="setting-group">
                                <label>Fenster-Transparenz:</label>
                                <input type="range" min="0" max="100" value="95" onchange="changeWindowOpacity(this.value)">
                            </div>
                            <div class="setting-group">
                                <label class="setting-switch">
                                    <input type="checkbox" checked onchange="toggleAnimations(this.checked)">
                                    <span class="switch-slider"></span>
                                    <span>Animationen aktivieren</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Login-Screen -->
                        <div class="settings-section" id="loginscreen">
                            <h3>Login-Anpassung</h3>
                            <div class="setting-group">
                                <label>Login-Hintergrundbild:</label>
                                <select onchange="changeLoginBackground(this.value)">
                                    <option value="default" selected>Standard (wie Desktop)</option>
                                    <option value="blur">Desktop mit Unsch√§rfe</option>
                                    <option value="dark">Dunkel</option>
                                    <option value="light">Hell</option>
                                    <option value="custom">Benutzerdefiniert</option>
                                </select>
                            </div>
                            <div class="setting-group" id="custom-login-bg" style="display: none;">
                                <label>Eigene Login-Hintergrund URL:</label>
                                <div class="setting-input-group">
                                    <input type="text" id="custom-login-wallpaper" placeholder="https://example.com/image.jpg">
                                    <button onclick="setCustomLoginBackground(document.getElementById('custom-login-wallpaper').value)">Anwenden</button>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <label>Login-Logo:</label>
                                <select onchange="changeLoginLogo(this.value)">
                                    <option value="text" selected>Text (WebOS)</option>
                                    <option value="icon">Symbol</option>
                                    <option value="none">Kein Logo</option>
                                </select>
                            </div>
                            
                            <div class="setting-group">
                                <label>Login-Box-Stil:</label>
                                <select onchange="changeLoginStyle(this.value)">
                                    <option value="glass" selected>Glaseffekt</option>
                                    <option value="solid">Einfarbig</option>
                                    <option value="minimal">Minimalistisch</option>
                                </select>
                            </div>

                            <div class="setting-group">
                                <label>Login-Text:</label>
                                <input type="text" id="login-title" value="WebOS Login" onchange="changeLoginTitle(this.value)">
                            </div>
                        </div>
                        
                        <!-- System -->
                        <div class="settings-section" id="system">
                            <h3>Systemeinstellungen</h3>
                            <div class="setting-group">
                                <label>Sprache:</label>
                                <select onchange="changeLanguage(this.value)">
                                    <option value="de" selected>Deutsch</option>
                                    <option value="en">Englisch</option>
                                    <option value="fr">Franz√∂sisch</option>
                                    <option value="es">Spanisch</option>
                                </select>
                            </div>
                            
                            <div class="setting-group">
                                <label>Zeitformat:</label>
                                <select onchange="changeTimeFormat(this.value)">
                                    <option value="24h" selected>24 Stunden</option>
                                    <option value="12h">12 Stunden (AM/PM)</option>
                                </select>
                            </div>
                            
                            <div class="setting-group">
                                <label class="setting-switch">
                                    <input type="checkbox" checked onchange="toggleSounds(this.checked)">
                                    <span class="switch-slider"></span>
                                    <span>Systemkl√§nge</span>
                                </label>
                            </div>
                            
                            <div class="setting-group">
                                <label class="setting-switch">
                                    <input type="checkbox" onchange="toggleNotifications(this.checked)">
                                    <span class="switch-slider"></span>
                                    <span>Benachrichtigungen</span>
                                </label>
                            </div>
                            
                            <h3>Datensicherung</h3>
                            <div class="setting-group">
                                <button onclick="exportSettings()">Einstellungen exportieren</button>
                                <button onclick="document.getElementById('import-settings').click()">Einstellungen importieren</button>
                                <input type="file" id="import-settings" style="display:none" onchange="importSettings(this)">
                            </div>
                            
                            <h3>Zur√ºcksetzen</h3>
                            <div class="setting-group">
                                <button class="danger-button" onclick="if(confirm('Alle Einstellungen zur√ºcksetzen?')) resetAllSettings()">Auf Standardeinstellungen zur√ºcksetzen</button>
                            </div>
                        </div>
                        
                        <!-- Info -->
                        <div class="settings-section" id="about">
                            <h3>WebDesktop OS</h3>
                            <p>Version: 1.0.0</p>
                            <p>Ein modernes Web-basiertes Betriebssystem</p>
                            <p>¬© 2025 WebDesktop Team</p>
                            
                            <h3>System-Information</h3>
                            <div id="system-info">
                                <p><strong>Browser:</strong> <span id="browser-info"></span></p>
                                <p><strong>Betriebssystem:</strong> <span id="os-info"></span></p>
                                <p><strong>Aufl√∂sung:</strong> <span id="screen-info"></span></p>
                                <p><strong>Sprache:</strong> <span id="lang-info"></span></p>
                            </div>
                            
                            <script>
                                document.getElementById('browser-info').textContent = navigator.userAgent.match(/(?:firefox|chrome|safari|opera|edge|msie|trident(?=\/))\/?\s*(\d+)/i)[1];
                                document.getElementById('os-info').textContent = navigator.platform;
                                document.getElementById('screen-info').textContent = window.innerWidth + ' √ó ' + window.innerHeight;
                                document.getElementById('lang-info').textContent = navigator.language;
                            </script>
                        </div>
                    </div>
                </div>
            `
        },
        calculator: {
            title: 'Rechner',
            html: `
                <div class="window-content">
                    <input id="calc-display" type="text" readonly>
                    <div class="calculator-grid">
                        <button onclick="appendToDisplay('1')">1</button>
                        <button onclick="appendToDisplay('2')">2</button>
                        <button onclick="appendToDisplay('3')">3</button>
                        <button onclick="clearDisplay()">C</button>
                        <button onclick="appendToDisplay('4')">4</button>
                        <button onclick="appendToDisplay('5')">5</button>
                        <button onclick="appendToDisplay('6')">6</button>
                        <button onclick="appendToDisplay('+')">+</button>
                        <button onclick="appendToDisplay('7')">7</button>
                        <button onclick="appendToDisplay('8')">8</button>
                        <button onclick="appendToDisplay('9')">9</button>
                        <button onclick="appendToDisplay('-')">-</button>
                        <button onclick="appendToDisplay('0')">0</button>
                        <button onclick="appendToDisplay('.')">.</button>
                        <button onclick="calculate()">=</button>
                        <button onclick="appendToDisplay('*')">*</button>
                    </div>
                </div>
            `
        },
        pong: {
            title: 'Pong',
            html: `<canvas class="game-canvas" id="pong-canvas"></canvas>`
        },
        textEditor: {
            title: 'Texteditor',
            html: `
                <div class="window-content">
                    <div id="editor-toolbar">
                        <button onclick="execCommand('bold')"><b>B</b></button>
                        <button onclick="execCommand('italic')"><i>I</i></button>
                        <button onclick="execCommand('underline')"><u>U</u></button>
                        <select onchange="execCommand('fontSize', this.value)">
                            <option value="1">Klein</option>
                            <option value="3" selected>Mittel</option>
                            <option value="5">Gro√ü</option>
                        </select>
                        <input type="color" onchange="execCommand('foreColor', this.value)">
                        <button onclick="saveText()">Speichern</button>
                    </div>
                    <div id="editor" contenteditable="true" style="border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: auto;">
                        Hier kannst du deinen Text bearbeiten...
                    </div>
                </div>
            `
        }
    };

    // Wallpaper System
    function changeWallpaper(source) {
        document.body.style.background = source;
        localStorage.setItem('wallpaper', source);
    }

    function resetWallpaper() {
        const defaultWallpaper = 'background.png';
        changeWallpaper(defaultWallpaper);
    }

    // Font Size System
    function changeFontSize(size) {
        document.documentElement.style.fontSize = size;
        localStorage.setItem('fontSize', size);
    }

    // Load saved font size
    const savedFontSize = localStorage.getItem('fontSize');
    if (savedFontSize) changeFontSize(savedFontSize);

    // Primary Color System
    function changePrimaryColor(color) {
        document.documentElement.style.setProperty('--primary-color', color);
        localStorage.setItem('primaryColor', color);
    }

    // Load saved primary color
    const savedPrimaryColor = localStorage.getItem('primaryColor');
    if (savedPrimaryColor) changePrimaryColor(savedPrimaryColor);

    // Load saved wallpaper
    const savedWallpaper = localStorage.getItem('wallpaper');
    if (savedWallpaper) changeWallpaper(savedWallpaper);

    // Background Color System
    function changeBackgroundColor(color) {
        document.body.style.backgroundColor = color;
        localStorage.setItem('backgroundColor', color);
    }

    // Ghost Speed System
    let ghostSpeed = 2;
    function changeGhostSpeed(speed) {
        ghostSpeed = parseInt(speed);
        localStorage.setItem('ghostSpeed', speed);
    }

    // Load saved ghost speed
    const savedGhostSpeed = localStorage.getItem('ghostSpeed');
    if (savedGhostSpeed) changeGhostSpeed(savedGhostSpeed);

    // Dark Mode System
    function toggleDarkMode(isDark) {
        if (isDark) {
            document.body.classList.add('dark-mode');
            localStorage.setItem('theme', 'dark');
        } else {
            document.body.classList.remove('dark-mode');
            localStorage.setItem('theme', 'light');
        }
    }

    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-mode');
        document.getElementById('dark-mode-switch')?.setAttribute('checked', 'true');
    }

    // Window Management
    function createWindow(app) {
        const window = document.createElement('div');
        window.className = 'window';
        window.innerHTML = `
            <div class="window-header">
                <span>${app.title}</span>
                <div class="window-controls">
                    <button class="window-minimize" onclick="minimizeWindow(this.parentElement.parentElement.parentElement)">-</button>
                    <button class="window-maximize" onclick="maximizeWindow(this.parentElement.parentElement.parentElement)">‚ñ°</button>
                    <button class="window-close" onclick="this.parentElement.parentElement.parentElement.remove()">√ó</button>
                </div>
            </div>
            <div class="window-content">
                ${app.html}
            </div>
            <div class="resize-handle"></div>
        `;

        document.body.appendChild(window);
        makeDraggable(window);
        makeResizable(window);
        window.style.zIndex = zIndex++;
        
        // Setze Standardposition, wenn nicht definiert
        if (!window.style.left) window.style.left = '100px';
        if (!window.style.top) window.style.top = '100px';
        
        return window;
    }

    function makeResizable(element) {
        const resizer = element.querySelector('.resize-handle');
        resizer.addEventListener('mousedown', function(e) {
            e.preventDefault();
            
            const startX = e.clientX;
            const startY = e.clientY;
            const startWidth = parseInt(document.defaultView.getComputedStyle(element).width, 10);
            const startHeight = parseInt(document.defaultView.getComputedStyle(element).height, 10);
            
            document.addEventListener('mousemove', resize);
            document.addEventListener('mouseup', stopResize);
            
            function resize(e) {
                element.style.width = (startWidth + e.clientX - startX) + 'px';
                element.style.height = (startHeight + e.clientY - startY) + 'px';
                
                // Aktualisiere Canvas-Gr√∂√üe f√ºr Spiele, falls vorhanden
                const canvas = element.querySelector('canvas');
                if (canvas) {
                    const contentWidth = element.clientWidth - 40; // Padding ber√ºcksichtigen
                    const contentHeight = element.clientHeight - 92; // Header + Padding
                    canvas.width = contentWidth;
                    canvas.height = contentHeight;

                    // Falls Pong-Spiel, aktualisiere Spielfeld
                    if (element.pongInstance) {
                        element.pongInstance.resize(contentWidth, contentHeight);
                    }
                }
            }
            
            function stopResize() {
                document.removeEventListener('mousemove', resize);
                document.removeEventListener('mouseup', stopResize);
            }
        });
    }

    // Fenster maximieren
    function maximizeWindow(window) {
        if (window.classList.contains('maximized')) {
            // R√ºcksetzen auf gespeicherte Gr√∂√üe und Position
            window.style.width = window.dataset.prevWidth || '400px';
            window.style.height = window.dataset.prevHeight || '300px';
            window.style.top = window.dataset.prevTop || '100px';
            window.style.left = window.dataset.prevLeft || '100px';
            window.classList.remove('maximized');
        } else {
            // Aktuelle Gr√∂√üe und Position speichern
            window.dataset.prevWidth = window.style.width;
            window.dataset.prevHeight = window.style.height;
            window.dataset.prevTop = window.style.top;
            window.dataset.prevLeft = window.style.left;
            
            // Auf Vollbild setzen
            window.style.width = 'calc(100% - 40px)';
            window.style.height = 'calc(100% - 40px)';
            window.style.top = '20px';
            window.style.left = '20px';
            window.classList.add('maximized');
        }
        
        // Canvas-Gr√∂√üe aktualisieren, falls vorhanden
        const canvas = window.querySelector('canvas');
        if (canvas) {
            const contentWidth = window.querySelector('.window-content').clientWidth;
            const contentHeight = window.querySelector('.window-content').clientHeight;
            canvas.width = contentWidth;
            canvas.height = contentHeight;
            
            // Falls Pong-Spiel, aktualisiere Spielfeld
            if (window.pongInstance) {
                window.pongInstance.resize(contentWidth, contentHeight);
            }
        }
    }

    // Fenster minimieren
    function minimizeWindow(window) {
        if (window.classList.contains('minimized')) {
            window.style.height = window.dataset.prevHeight;
            window.querySelector('.window-content').style.display = 'block';
            window.classList.remove('minimized');
        } else {
            window.dataset.prevHeight = window.style.height;
            window.style.height = 'auto';
            window.querySelector('.window-content').style.display = 'none';
            window.classList.add('minimized');
        }
    }

    function makeDraggable(element) {
        const header = element.querySelector('.window-header');
        header.onmousedown = function(e) {
            let offsetX = e.clientX - element.offsetLeft;
            let offsetY = e.clientY - element.offsetTop;

            function move(e) {
                element.style.left = (e.clientX - offsetX) + 'px';
                element.style.top = (e.clientY - offsetY) + 'px';
            }

            document.onmousemove = move;
            document.onmouseup = () => document.onmousemove = null;
        };
    }

    // Calculator Logic
    function appendToDisplay(value) {
        document.getElementById('calc-display').value += value;
    }

    function clearDisplay() {
        document.getElementById('calc-display').value = '';
    }

    function calculate() {
        try {
            const result = eval(document.getElementById('calc-display').value);
            document.getElementById('calc-display').value = result;
        } catch {
            alert('Ung√ºltige Rechnung!');
        }
    }

    // Pong Game
    class PongGame {
        constructor(canvas) {
            this.canvas = canvas;
            this.ctx = canvas.getContext('2d');
            this.width = canvas.width;
            this.height = canvas.height;

            this.paddleHeight = this.height * 0.15; // Relative Gr√∂√üe
            this.paddleWidth = this.width * 0.02;
            this.ballSize = Math.min(this.width, this.height) * 0.02;

            this.reset();
            this.init();
        }

        reset() {
            this.playerScore = 0;
            this.computerScore = 0;
            this.ball = {
                x: this.width / 2,
                y: this.height / 2,
                dx: 5,
                dy: 5
            };
        }

        init() {
            this.canvas.addEventListener('mousemove', e => {
                const rect = this.canvas.getBoundingClientRect();
                this.playerY = e.clientY - rect.top - this.paddleHeight / 2;
            });

            this.gameLoop();
        }

        gameLoop() {
            this.update();
            this.draw();
            requestAnimationFrame(() => this.gameLoop());
        }

        update() {
            this.ball.x += this.ball.dx;
            this.ball.y += this.ball.dy;

            // Computer AI
            this.computerY = this.ball.y - this.paddleHeight / 2;

            // Collisions
            if (this.ball.y <= 0 || this.ball.y >= this.height) this.ball.dy *= -1;
            if (this.ball.x <= this.paddleWidth && this.ball.y >= this.playerY &&
                this.ball.y <= this.playerY + this.paddleHeight) this.ball.dx *= -1;
            if (this.ball.x >= this.width - this.paddleWidth &&
                this.ball.y >= this.computerY &&
                this.ball.y <= this.computerY + this.paddleHeight) this.ball.dx *= -1;

            // Scoring
            if (this.ball.x <= 0) {
                this.computerScore++;
                this.resetBall();
            }
            if (this.ball.x >= this.width) {
                this.playerScore++;
                this.resetBall();
            }
        }

        draw() {
            this.ctx.fillStyle = 'black';
            this.ctx.fillRect(0, 0, this.width, this.height);

            // Paddles
            this.ctx.fillStyle = 'white';
            this.ctx.fillRect(0, this.playerY, this.paddleWidth, this.paddleHeight);
            this.ctx.fillRect(this.width - this.paddleWidth, this.computerY, this.paddleWidth, this.paddleHeight);

            // Ball
            this.ctx.beginPath();
            this.ctx.arc(this.ball.x, this.ball.y, this.ballSize, 0, Math.PI * 2);
            this.ctx.fill();

            // Score
            this.ctx.font = '30px Arial';
            this.ctx.fillText(this.playerScore, 50, 50);
            this.ctx.fillText(this.computerScore, this.width - 70, 50);
        }

        resetBall() {
            this.ball = {
                x: this.width / 2,
                y: this.height / 2,
                dx: 5 * (Math.random() > 0.5 ? 1 : -1),
                dy: 5
            };
        }

        resize(width, height) {
            this.width = width;
            this.height = height;
            this.paddleHeight = height * 0.15;
            this.paddleWidth = width * 0.02;
            this.ballSize = Math.min(width, height) * 0.02;
            this.ball.x = this.ball.x * width / this.width;
            this.ball.y = this.ball.y * height / this.height;
        }
    }

    // App Starter
    function openApp(appName) {
        const app = apps[appName];
        if (!app) {
            console.error(`App "${appName}" nicht gefunden.`);
            return;
        }

        const window = createWindow(app); // Erstellt ein Fenster mit dem HTML der App
        if (!window) {
            console.error(`Fenster f√ºr App "${appName}" konnte nicht erstellt werden.`);
            return;
        }
        
        // Spezielle Initialisierung je nach App
        if (appName === 'pong') {
            const canvas = window.querySelector('canvas');
            if (canvas) {
                const pongGame = new PongGame(canvas);
                window.pongInstance = pongGame;  // Speichere Spielinstanz im Fenster
            } else {
                console.error('Canvas f√ºr Pong-Spiel nicht gefunden');
            }
        } else if (appName === 'textEditor') {
            const editor = window.querySelector('#editor');
            if (editor) {
                editor.addEventListener('input', () => {
                    window.dataset.hasChanges = 'true';
                });
            }
        } else if (appName === 'calculator') {
            // Gr√∂√üe f√ºr Taschenrechner anpassen
            window.style.width = '350px';
            window.style.height = '450px';
        }

        if (localStorage.getItem('playAppSound') !== 'false') {
            playSound('open-app.mp3');
        }
    }

    function playSound(soundFile) {
        if (localStorage.getItem('sounds') !== 'false') {
            const audio = new Audio(soundFile);
            audio.volume = 0.3;
            audio.play().catch(() => {});
        }
    }

    // Systemzeit
    function updateTime() {
        updateTimeDisplay();
    }

    function updateTimeDisplay() {
        const timeFormat = localStorage.getItem('timeFormat') || '24h';
        const options = {
            hour: '2-digit', 
            minute: '2-digit'
        };
        
        if (timeFormat === '12h') {
            options.hour12 = true;
        } else {
            options.hour12 = false;
        }
        
        const currentLang = localStorage.getItem('language') || 'de';
        document.getElementById('system-time').textContent = 
            new Date().toLocaleTimeString(`${currentLang}-${currentLang.toUpperCase()}`, options);
    }

    setInterval(updateTime, 1000);
    updateTime();

    function execCommand(command, value = null) {
        document.execCommand(command, false, value);
    }

    function saveText() {
        const content = document.getElementById('editor').innerHTML;
        const blob = new Blob([content], { type: 'text/html' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'texteditor-content.html';
        a.click();
    }

    // Einstellungen Tab Navigation
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('settings-nav-item')) {
            const target = e.target.dataset.target;
            
            // Aktive Klasse in der Sidebar umschalten
            document.querySelectorAll('.settings-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            e.target.classList.add('active');
            
            // Aktiven Inhalt umschalten
            document.querySelectorAll('.settings-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(target).classList.add('active');
        }
    });

    // Login-Hintergrund Einstellungen
    function changeLoginBackground(value) {
        const customBgDiv = document.getElementById('custom-login-bg');
        if (customBgDiv) {
            if (value === 'custom') {
                customBgDiv.style.display = 'block';
            } else {
                customBgDiv.style.display = 'none';
                localStorage.setItem('loginBackground', value);
                
                // Vorschau-Aktualisierung
                const loginContainer = document.getElementById('login-container');
                if (loginContainer) {
                    if (value === 'default') {
                        // Verwende den aktuellen Desktop-Hintergrund
                        const currentBg = document.body.style.background;
                        loginContainer.style.background = currentBg;
                        loginContainer.style.backdropFilter = '';
                    } else if (value === 'blur') {
                        loginContainer.style.background = 'rgba(0, 0, 0, 0.5)';
                        loginContainer.style.backdropFilter = 'blur(10px)';
                    } else if (value === 'dark') {
                        loginContainer.style.background = 'rgba(0, 0, 0, 0.8)';
                        loginContainer.style.backdropFilter = '';
                    } else if (value === 'light') {
                        loginContainer.style.background = 'rgba(255, 255, 255, 0.8)';
                        loginContainer.style.backdropFilter = '';
                    }
                }
            }
        }
    }
    
    function setCustomLoginBackground(url) {
        document.getElementById('login-container').style.background = `url('${url}') center/cover`;
        localStorage.setItem('customLoginBg', url);
        localStorage.setItem('loginBackground', 'custom');
    }

    // Dock-Anpassungen
    function changeDockPosition(position) {
        const dock = document.getElementById('dock');
        
        // Entferne alte Positionierung
        dock.style.left = '';
        dock.style.right = '';
        dock.style.bottom = '';
        dock.style.top = '';
        dock.style.transform = '';
        
        // Setze neue Position
        if (position === 'bottom') {
            dock.style.left = '50%';
            dock.style.bottom = '24px';
            dock.style.transform = 'translateX(-50%)';
            dock.style.flexDirection = 'row';
        } else if (position === 'left') {
            dock.style.left = '24px';
            dock.style.top = '50%';
            dock.style.transform = 'translateY(-50%)';
            dock.style.flexDirection = 'column';
        } else if (position === 'right') {
            dock.style.right = '24px';
            dock.style.top = '50%';
            dock.style.transform = 'translateY(-50%)';
            dock.style.flexDirection = 'column';
        }
        
        localStorage.setItem('dockPosition', position);
    }
    
    function changeDockSize(size) {
        const icons = document.querySelectorAll('.app-icon');
        icons.forEach(icon => {
            icon.style.width = `${size}px`;
            icon.style.height = `${size}px`;
        });
        localStorage.setItem('dockSize', size);
    }
    
    function toggleDockAutoHide(enabled) {
        const dock = document.getElementById('dock');
        if (enabled) {
            dock.classList.add('dock-autohide');
        } else {
            dock.classList.remove('dock-autohide');
        }
        
        // Wenn das Dock unten ist, muss der hover-Effekt angepasst werden
        const dockPosition = localStorage.getItem('dockPosition') || 'bottom';
        if (dockPosition === 'bottom') {
            document.styleSheets[0].insertRule(`
                .dock-autohide:hover {
                    transform: translateX(-50%) translateY(0) !important;
                    opacity: 1;
                }
            `, document.styleSheets[0].cssRules.length);
        } else if (dockPosition === 'left') {
            document.styleSheets[0].insertRule(`
                .dock-autohide:hover {
                    transform: translateX(0) translateY(-50%) !important;
                    opacity: 1;
                }
            `, document.styleSheets[0].cssRules.length);
        } else if (dockPosition === 'right') {
            document.styleSheets[0].insertRule(`
                .dock-autohide:hover {
                    transform: translateX(0) translateY(-50%) !important;
                    opacity: 1;
                }
            `, document.styleSheets[0].cssRules.length);
        }
        
        localStorage.setItem('dockAutoHide', enabled);
    }

    // Schriftart √§ndern
    function changeFontFamily(fontFamily) {
        document.documentElement.style.setProperty('--font-family', fontFamily);
        localStorage.setItem('fontFamily', fontFamily);
    }

    // Akzentfarbe √§ndern
    function changeAccentColor(color) {
        document.documentElement.style.setProperty('--accent-color', color);
        localStorage.setItem('accentColor', color);
    }

    // Fenster-Transparenz √§ndern
    function changeWindowOpacity(value) {
        const opacity = value / 100;
        document.documentElement.style.setProperty('--window-opacity', opacity);
        localStorage.setItem('windowOpacity', opacity);
    }

    // Hintergrund-Deckkraft
    function setBackgroundOpacity(value) {
        const overlay = document.getElementById('bg-overlay') || document.createElement('div');
        if (!document.getElementById('bg-overlay')) {
            overlay.id = 'bg-overlay';
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.zIndex = '-1';
            document.body.appendChild(overlay);
        }
        
        const opacity = 1 - (value / 100);
        overlay.style.backgroundColor = `rgba(0, 0, 0, ${opacity})`;
        localStorage.setItem('bgOpacity', value);
    }

    // Desktop-Icons anzeigen/ausblenden
    function toggleDesktopIcons(show) {
        const iconsContainer = document.getElementById('desktop-icons');
        if (show) {
            if (!iconsContainer) {
                const container = document.createElement('div');
                container.id = 'desktop-icons';
                container.className = 'desktop-icons-container';
                document.body.appendChild(container);
                
                // Standard-Icons hinzuf√ºgen
                addDesktopIcon('settings.png', 'Einstellungen', 'openApp(\'settings\')');
                addDesktopIcon('calc.png', 'Rechner', 'openApp(\'calculator\')');
            } else {
                iconsContainer.style.display = 'grid';
            }
        } else if (iconsContainer) {
            iconsContainer.style.display = 'none';
        }
        localStorage.setItem('showDesktopIcons', show);
    }
    
    function addDesktopIcon(icon, name, action) {
        const container = document.getElementById('desktop-icons');
        if (container) {
            const iconEl = document.createElement('div');
            iconEl.className = 'desktop-icon';
            iconEl.innerHTML = `
                <img src="${icon}" alt="${name}">
                <span>${name}</span>
            `;
            iconEl.onclick = new Function(action);
            container.appendChild(iconEl);
        }
    }

    // Einstellungen exportieren/importieren
    function exportSettings() {
        const settings = {};
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            settings[key] = localStorage.getItem(key);
        }
        
        const blob = new Blob([JSON.stringify(settings)], { type: 'application/json' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'webos-settings.json';
        a.click();
    }
    
    function importSettings(input) {
        const file = input.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const settings = JSON.parse(e.target.result);
                    for (const key in settings) {
                        localStorage.setItem(key, settings[key]);
                    }
                    alert('Einstellungen wurden importiert. Seite wird neu geladen.');
                    location.reload();
                } catch (error) {
                    alert('Fehler beim Importieren der Einstellungen: ' + error);
                }
            };
            reader.readAsText(file);
        }
    }
    
    // Alle Einstellungen zur√ºcksetzen
    function resetAllSettings() {
        // Speichere nur den Benutzernamen
        const users = localStorage.getItem('users');
        localStorage.clear();
        if (users) localStorage.setItem('users', users);
        
        alert('Alle Einstellungen wurden zur√ºckgesetzt. Seite wird neu geladen.');
        location.reload();
    }
    
    // Animationen umschalten
    function toggleAnimations(enabled) {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
        localStorage.setItem('animations', enabled);
    }
    
    // Systemkl√§nge umschalten
    function toggleSounds(enabled) {
        localStorage.setItem('sounds', enabled);
    }
    
    // Benachrichtigungen umschalten
    function toggleNotifications(enabled) {
        localStorage.setItem('notifications', enabled);
        if (enabled && Notification.permission !== "granted") {
            Notification.requestPermission();
        }
    }
    
    // Zeitformat √§ndern
    function changeTimeFormat(format) {
        localStorage.setItem('timeFormat', format);
        updateTimeDisplay();
    }
    
    // Sprache √§ndern
    function changeLanguage(lang) {
        localStorage.setItem('language', lang);
    }
    
    // Login-Logo √§ndern
    function changeLoginLogo(type) {
        const loginTitle = document.querySelector('#login-container h1');
        if (type === 'text') {
            loginTitle.textContent = 'WebOS Login';
            loginTitle.style.display = 'block';
        } else if (type === 'icon') {
            loginTitle.innerHTML = '<img src="logo.png" alt="WebOS Logo" style="height: 80px;">';
            loginTitle.style.display = 'block';
        } else {
            loginTitle.style.display = 'none';
        }
        localStorage.setItem('loginLogo', type);
    }
    
    // Login-Stil √§ndern
    function changeLoginStyle(style) {
        const loginForm = document.querySelector('.login-form');
        loginForm.className = 'login-form';
        loginForm.classList.add('login-style-' + style);
        localStorage.setItem('loginStyle', style);
    }

    // Login-Titel √§ndern
    function changeLoginTitle(title) {
        const loginTitle = document.querySelector('#login-container h1');
        if (loginTitle) {
            loginTitle.textContent = title;
            localStorage.setItem('loginTitle', title);
        }
    }
    
    // Lade gespeicherte Einstellungen beim Start
    function loadSavedSettings() {
        // Lade Dock-Position
        const savedDockPosition = localStorage.getItem('dockPosition');
        if (savedDockPosition) changeDockPosition(savedDockPosition);
        
        // Lade Dock-Gr√∂√üe
        const savedDockSize = localStorage.getItem('dockSize');
        if (savedDockSize) changeDockSize(savedDockSize);
        
        // Lade Schriftart
        const savedFontFamily = localStorage.getItem('fontFamily');
        if (savedFontFamily) changeFontFamily(savedFontFamily);
        
        // Lade Akzentfarbe
        const savedAccentColor = localStorage.getItem('accentColor');
        if (savedAccentColor) changeAccentColor(savedAccentColor);
        
        // Lade Fenster-Transparenz
        const savedWindowOpacity = localStorage.getItem('windowOpacity');
        if (savedWindowOpacity) changeWindowOpacity(savedWindowOpacity);
        
        // Lade Hintergrund-Deckkraft
        const savedBgOpacity = localStorage.getItem('bgOpacity');
        if (savedBgOpacity) setBackgroundOpacity(savedBgOpacity);
        
        // Lade Desktop-Icons-Einstellung
        const showDesktopIcons = localStorage.getItem('showDesktopIcons') === 'true';
        if (showDesktopIcons) toggleDesktopIcons(true);
        
        // Lade Login-Hintergrund
        const savedLoginBg = localStorage.getItem('loginBackground');
        if (savedLoginBg) {
            if (savedLoginBg === 'custom') {
                const customBg = localStorage.getItem('customLoginBg');
                if (customBg) setCustomLoginBackground(customBg);
            } else {
                changeLoginBackground(savedLoginBg);
            }
        }
        
        // Lade Login-Stil
        const savedLoginStyle = localStorage.getItem('loginStyle');
        if (savedLoginStyle) {
            const loginForm = document.querySelector('.login-form');
            if (loginForm) {
                loginForm.className = 'login-form';
                loginForm.classList.add('login-style-' + savedLoginStyle);
            }
        }
        
        // Lade Login-Logo
        const savedLoginLogo = localStorage.getItem('loginLogo');
        if (savedLoginLogo) changeLoginLogo(savedLoginLogo);
        
        // Lade Login-Titel
        const savedLoginTitle = localStorage.getItem('loginTitle');
        if (savedLoginTitle) {
            const loginTitle = document.querySelector('#login-container h1');
            if (loginTitle) loginTitle.textContent = savedLoginTitle;
        }
        
        // Lade Animations-Einstellung
        const animations = localStorage.getItem('animations') !== 'false';
        toggleAnimations(animations);
        
        // Lade Sprache und Zeitformat
        const savedTimeFormat = localStorage.getItem('timeFormat');
        if (savedTimeFormat) changeTimeFormat(savedTimeFormat);
        
        // Aktualisiere die Zeit im neuen Format
        updateTime();
    }

    // Beim Laden ausf√ºhren
    document.addEventListener('DOMContentLoaded', loadSavedSettings);
</script>
</body>
</html>